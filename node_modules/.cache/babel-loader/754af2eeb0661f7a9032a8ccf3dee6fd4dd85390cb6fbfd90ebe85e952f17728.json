{"ast":null,"code":"var _jsxFileName = \"/Users/marekletev/Desktop/OAMK/WEB DEVELOPMENT FRAMEWORKS/advanced_project/todo/src/screens/Home.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport './Home.css';\nimport axios from 'axios';\nimport Row from '../components/Row';\nimport { useUser } from '../context/useUser';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst url = 'http://localhost:3001';\nfunction Home() {\n  _s();\n  const {\n    user\n  } = useUser();\n  const [task, setTask] = useState('');\n  const [tasks, setTasks] = useState([]);\n  useEffect(() => {\n    axios.get(url).then(response => {\n      setTasks(response.data);\n    }).catch(error => {\n      alert(error.response.data ? error.response.data.error : error);\n    });\n  }, []);\n  const addTask = () => {\n    const headers = {\n      headers: {\n        Authorization: user.token\n      }\n    };\n    axios.post(url + '/create', {\n      description: task\n    }, headers).then(response => {\n      setTasks([...tasks, {\n        id: response.data.id,\n        description: task\n      }]);\n      setTask('');\n    }).catch(error => {\n      alert(error.response.data.error ? error.response.data.error : error);\n    });\n  };\n  const deleteTask = id => {\n    const headers = {\n      headers: {\n        Authorization: user.token\n      }\n    };\n    axios.delete(url + '/delete/' + id, headers).then(response => {\n      const withoutRemoved = tasks.filter(item => item.id !== id);\n      setTasks(withoutRemoved);\n    }).catch(error => {\n      alert(error.response.data.error ? error.response.data.error : error);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Todos\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Add new task\",\n        value: task,\n        onChange: e => setTask(e.target.value),\n        onKeyDown: e => {\n          if (e.key === 'Enter') {\n            e.preventDefault();\n            addTask();\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: tasks.map(item => /*#__PURE__*/_jsxDEV(Row, {\n        item: item,\n        deleteTask: deleteTask\n      }, item.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 15\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n}\n_s(Home, \"AxsrzGQEdBqkjbX4rjBXn69eRBw=\", false, function () {\n  return [useUser];\n});\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["useEffect","useState","axios","Row","useUser","jsxDEV","_jsxDEV","url","Home","_s","user","task","setTask","tasks","setTasks","get","then","response","data","catch","error","alert","addTask","headers","Authorization","token","post","description","id","deleteTask","delete","withoutRemoved","filter","item","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","value","onChange","e","target","onKeyDown","key","preventDefault","map","_c","$RefreshReg$"],"sources":["/Users/marekletev/Desktop/OAMK/WEB DEVELOPMENT FRAMEWORKS/advanced_project/todo/src/screens/Home.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport './Home.css';\nimport axios from 'axios';\nimport Row from '../components/Row';\nimport { useUser } from '../context/useUser';\n\nconst url = 'http://localhost:3001'\n\nfunction Home() {\n  const {user} = useUser()\n  const [task, setTask] = useState('')\n  const [tasks, setTasks] = useState([])\n\n  useEffect(() => {\n    axios.get(url)\n      .then(response => {\n        setTasks(response.data)\n      }).catch(error => {\n        alert(error.response.data ? error.response.data.error : error)\n      })\n  }, [])\n\n  const addTask = () => {\n    const headers = {headers: {Authorization:user.token}}\n\n    axios.post(url + '/create', {\n      description: task\n    }, headers)\n    .then(response => {\n      setTasks([...tasks,{id: response.data.id,description: task}])\n      setTask('')\n    }).catch(error => {\n      alert(error.response.data.error ? error.response.data.error : error)\n    })\n  }\n\n  const deleteTask = (id) => {\n    const headers = {headers: {Authorization:user.token}}\n\n    axios.delete(url + '/delete/'+ id,headers)\n    .then(response => {\n      const withoutRemoved = tasks.filter((item) => item.id !== id)\n      setTasks(withoutRemoved)\n    }).catch(error => {\n      alert(error.response.data.error ? error.response.data.error : error)\n    })\n  }\n\n  return (\n    <div id='container'>\n      <h3>Todos</h3>\n      <form>\n        <input \n          placeholder='Add new task' \n          value={task}\n          onChange={e => setTask(e.target.value)}\n          onKeyDown={e => {\n            if (e.key === 'Enter') {\n              e.preventDefault()\n              addTask()\n            }\n          }}\n        />\n      </form>\n      <ul>\n          {\n            tasks.map(item => (\n              <Row key={item.id} item={item} deleteTask={deleteTask} />\n            ))\n          }\n      </ul>\n    </div>\n  );\n}\n\nexport default Home;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}