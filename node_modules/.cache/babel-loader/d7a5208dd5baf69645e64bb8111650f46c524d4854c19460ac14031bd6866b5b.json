{"ast":null,"code":"var _jsxFileName = \"/Users/marekletev/Desktop/OAMK/WEB DEVELOPMENT FRAMEWORKS/advanced_project/todo/src/context/UserProvider.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { UserContext } from \"./UserContext\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst url = process.env.REACT_APP_API_URL;\nexport default function UserProvider({\n  children\n}) {\n  _s();\n  const userFromSessionStorage = sessionStorage.getItem('user');\n  const [user, setUser] = useState(userFromSessionStorage ? JSON.parse(userFromSessionStorage) : {\n    email: '',\n    password: ''\n  });\n  const signUp = async () => {\n    const json = JSON.stringify(user);\n    const headers = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    try {\n      await axios.post(url + '/user/register', json, headers);\n      setUser({\n        email: '',\n        password: ''\n      });\n    } catch (error) {\n      throw error;\n    }\n  };\n  const signIn = async () => {\n    const json = JSON.stringify(user);\n    const headers = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    try {\n      const response = await axios.post(url + \"/user/login\", json, headers);\n      const token = response.data.token;\n      setUser(response.data);\n      sessionStorage.setItem(\"user\", JSON.stringify(response.data));\n    } catch (error) {\n      setUser({\n        email: '',\n        password: ''\n      });\n      throw error;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      user,\n      setUser,\n      signUp,\n      signIn\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 9\n  }, this);\n}\n_s(UserProvider, \"SmL/Yzsb4oGRvzXRfMBLo4s1grw=\");\n_c = UserProvider;\nvar _c;\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"names":["useState","UserContext","axios","jsxDEV","_jsxDEV","url","process","env","REACT_APP_API_URL","UserProvider","children","_s","userFromSessionStorage","sessionStorage","getItem","user","setUser","JSON","parse","email","password","signUp","json","stringify","headers","post","error","signIn","response","token","data","setItem","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/marekletev/Desktop/OAMK/WEB DEVELOPMENT FRAMEWORKS/advanced_project/todo/src/context/UserProvider.js"],"sourcesContent":["import { useState } from \"react\";\nimport { UserContext } from \"./UserContext\";\nimport axios from \"axios\";\n\nconst url = process.env.REACT_APP_API_URL\n\nexport default function UserProvider({children}) {\n    const userFromSessionStorage = sessionStorage.getItem('user')\n    const [user, setUser] = useState(userFromSessionStorage ? JSON.parse(userFromSessionStorage): {email: '', password: ''})\n\n    const signUp = async () => {\n        const json = JSON.stringify(user)\n        const headers = {headers: {'Content-Type': 'application/json'}}\n        try {\n            await axios.post(url + '/user/register', json,headers)\n            setUser({email: '', password: ''})\n        } catch(error) {\n            throw error\n        }\n    }\n\n    const signIn = async () => {\n        const json = JSON.stringify(user)\n        const headers = {headers: {'Content-Type': 'application/json'}}\n        try {\n            const response = await axios.post(url + \"/user/login\", json,headers)\n            const token = response.data.token\n            setUser(response.data)\n            sessionStorage.setItem(\"user\",JSON.stringify(response.data))\n        } catch(error) {\n            setUser({email: '', password: ''})\n            throw error\n        }\n    }\n\n    return (\n        <UserContext.Provider value={{user,setUser,signUp,signIn}}>\n            {children}\n        </UserContext.Provider>\n    )\n}"],"mappings":";;AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,WAAW,QAAQ,eAAe;AAC3C,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,GAAG,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB;AAEzC,eAAe,SAASC,YAAYA,CAAC;EAACC;AAAQ,CAAC,EAAE;EAAAC,EAAA;EAC7C,MAAMC,sBAAsB,GAAGC,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC;EAC7D,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGhB,QAAQ,CAACY,sBAAsB,GAAGK,IAAI,CAACC,KAAK,CAACN,sBAAsB,CAAC,GAAE;IAACO,KAAK,EAAE,EAAE;IAAEC,QAAQ,EAAE;EAAE,CAAC,CAAC;EAExH,MAAMC,MAAM,GAAG,MAAAA,CAAA,KAAY;IACvB,MAAMC,IAAI,GAAGL,IAAI,CAACM,SAAS,CAACR,IAAI,CAAC;IACjC,MAAMS,OAAO,GAAG;MAACA,OAAO,EAAE;QAAC,cAAc,EAAE;MAAkB;IAAC,CAAC;IAC/D,IAAI;MACA,MAAMtB,KAAK,CAACuB,IAAI,CAACpB,GAAG,GAAG,gBAAgB,EAAEiB,IAAI,EAACE,OAAO,CAAC;MACtDR,OAAO,CAAC;QAACG,KAAK,EAAE,EAAE;QAAEC,QAAQ,EAAE;MAAE,CAAC,CAAC;IACtC,CAAC,CAAC,OAAMM,KAAK,EAAE;MACX,MAAMA,KAAK;IACf;EACJ,CAAC;EAED,MAAMC,MAAM,GAAG,MAAAA,CAAA,KAAY;IACvB,MAAML,IAAI,GAAGL,IAAI,CAACM,SAAS,CAACR,IAAI,CAAC;IACjC,MAAMS,OAAO,GAAG;MAACA,OAAO,EAAE;QAAC,cAAc,EAAE;MAAkB;IAAC,CAAC;IAC/D,IAAI;MACA,MAAMI,QAAQ,GAAG,MAAM1B,KAAK,CAACuB,IAAI,CAACpB,GAAG,GAAG,aAAa,EAAEiB,IAAI,EAACE,OAAO,CAAC;MACpE,MAAMK,KAAK,GAAGD,QAAQ,CAACE,IAAI,CAACD,KAAK;MACjCb,OAAO,CAACY,QAAQ,CAACE,IAAI,CAAC;MACtBjB,cAAc,CAACkB,OAAO,CAAC,MAAM,EAACd,IAAI,CAACM,SAAS,CAACK,QAAQ,CAACE,IAAI,CAAC,CAAC;IAChE,CAAC,CAAC,OAAMJ,KAAK,EAAE;MACXV,OAAO,CAAC;QAACG,KAAK,EAAE,EAAE;QAAEC,QAAQ,EAAE;MAAE,CAAC,CAAC;MAClC,MAAMM,KAAK;IACf;EACJ,CAAC;EAED,oBACItB,OAAA,CAACH,WAAW,CAAC+B,QAAQ;IAACC,KAAK,EAAE;MAAClB,IAAI;MAACC,OAAO;MAACK,MAAM;MAACM;IAAM,CAAE;IAAAjB,QAAA,EACrDA;EAAQ;IAAAwB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACS,CAAC;AAE/B;AAAC1B,EAAA,CAlCuBF,YAAY;AAAA6B,EAAA,GAAZ7B,YAAY;AAAA,IAAA6B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}